---
import type { GetStaticPaths } from "astro";
import MainLayout from "@layouts/MainLayout.astro";
import type { PokemonListResponse } from "@interfaces/pokemon-list.response";
import PokemonCard from "@components/pokemons/PokemonCard.astro";

export const getStaticPaths = (async () => {
  const response = await fetch("https://pokeapi.co/api/v2/pokemon?limit=151");
  const json: PokemonListResponse = await response.json();
  const { results } = json;

  return results.map(({ name, url }) => {
    const id = url.split("/").at(-2);
    return {
      params: { id: id },
      props: { name: name, url: url },
    };
  });
}) satisfies GetStaticPaths;
const { id } = Astro.params;
const { name, url } = Astro.props;
---

<MainLayout title="Pokemon Details">
  <h1 class="text-2xl">
    Detalles de: <span class="text-4xl capitalize">{name}</span>
  </h1>
  <a href="/" class="text-bold">Regresar</a>
  <PokemonCard url={url} name={name} isBig />
</MainLayout>
